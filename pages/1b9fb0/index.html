<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Redis | Memorydoc</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="计算机技术、前端、后端、大数据、微服务、高性能框架、架构、数据结构、算法、RPC、SpringBoot、SpringCloud、Dubbo、并发编程。">
    <meta name="keywords" content="计算机技术、前端、后端、大数据、微服务、高性能框架、架构、数据结构、算法、RPC、SpringBoot、SpringCloud、Dubbo、并发编程">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.49dd1267.css" as="style"><link rel="preload" href="/assets/js/app.25d5bd39.js" as="script"><link rel="preload" href="/assets/js/2.da1b78fa.js" as="script"><link rel="preload" href="/assets/js/3.c45fb83a.js" as="script"><link rel="preload" href="/assets/js/88.35d4530d.js" as="script"><link rel="prefetch" href="/assets/js/10.ecb9c0a1.js"><link rel="prefetch" href="/assets/js/100.206ed983.js"><link rel="prefetch" href="/assets/js/101.f1d85f50.js"><link rel="prefetch" href="/assets/js/102.c2a93d4a.js"><link rel="prefetch" href="/assets/js/103.f1e9cd2b.js"><link rel="prefetch" href="/assets/js/104.0f8f61b8.js"><link rel="prefetch" href="/assets/js/105.930ed19f.js"><link rel="prefetch" href="/assets/js/106.08506098.js"><link rel="prefetch" href="/assets/js/107.3b93b9c9.js"><link rel="prefetch" href="/assets/js/108.206c968a.js"><link rel="prefetch" href="/assets/js/109.6b5b37fe.js"><link rel="prefetch" href="/assets/js/11.1e5d7a23.js"><link rel="prefetch" href="/assets/js/110.100bed15.js"><link rel="prefetch" href="/assets/js/111.72ce8516.js"><link rel="prefetch" href="/assets/js/112.3ac993a3.js"><link rel="prefetch" href="/assets/js/113.5fdbf696.js"><link rel="prefetch" href="/assets/js/114.811fcfeb.js"><link rel="prefetch" href="/assets/js/115.dad856d3.js"><link rel="prefetch" href="/assets/js/116.54a50252.js"><link rel="prefetch" href="/assets/js/117.cd7ac9bf.js"><link rel="prefetch" href="/assets/js/118.3c4286db.js"><link rel="prefetch" href="/assets/js/119.a949aead.js"><link rel="prefetch" href="/assets/js/12.b0a914c2.js"><link rel="prefetch" href="/assets/js/120.c4531bd8.js"><link rel="prefetch" href="/assets/js/121.942fc70f.js"><link rel="prefetch" href="/assets/js/122.2144ab4c.js"><link rel="prefetch" href="/assets/js/123.789ee4f0.js"><link rel="prefetch" href="/assets/js/124.d1141f29.js"><link rel="prefetch" href="/assets/js/125.e392515f.js"><link rel="prefetch" href="/assets/js/126.7939c6ae.js"><link rel="prefetch" href="/assets/js/127.a8034839.js"><link rel="prefetch" href="/assets/js/128.243ffdb5.js"><link rel="prefetch" href="/assets/js/129.052e6351.js"><link rel="prefetch" href="/assets/js/13.8a17b405.js"><link rel="prefetch" href="/assets/js/130.e40711d0.js"><link rel="prefetch" href="/assets/js/131.4dd33876.js"><link rel="prefetch" href="/assets/js/132.6c10fb01.js"><link rel="prefetch" href="/assets/js/133.593db447.js"><link rel="prefetch" href="/assets/js/134.58b78663.js"><link rel="prefetch" href="/assets/js/135.00bc55a8.js"><link rel="prefetch" href="/assets/js/136.17cee463.js"><link rel="prefetch" href="/assets/js/137.54f21198.js"><link rel="prefetch" href="/assets/js/138.57f02219.js"><link rel="prefetch" href="/assets/js/139.0e96803a.js"><link rel="prefetch" href="/assets/js/14.b00fceec.js"><link rel="prefetch" href="/assets/js/140.94fd7c64.js"><link rel="prefetch" href="/assets/js/141.91ed8a35.js"><link rel="prefetch" href="/assets/js/142.45f64d2c.js"><link rel="prefetch" href="/assets/js/143.33c44171.js"><link rel="prefetch" href="/assets/js/144.ce9133c0.js"><link rel="prefetch" href="/assets/js/145.0261f474.js"><link rel="prefetch" href="/assets/js/146.d169ebf8.js"><link rel="prefetch" href="/assets/js/147.3a85443e.js"><link rel="prefetch" href="/assets/js/148.977082a5.js"><link rel="prefetch" href="/assets/js/149.d06ba65d.js"><link rel="prefetch" href="/assets/js/15.097c2bad.js"><link rel="prefetch" href="/assets/js/150.e45ce85f.js"><link rel="prefetch" href="/assets/js/151.96d487fd.js"><link rel="prefetch" href="/assets/js/152.bff1944e.js"><link rel="prefetch" href="/assets/js/153.de84d3b6.js"><link rel="prefetch" href="/assets/js/154.496243aa.js"><link rel="prefetch" href="/assets/js/155.c1d64041.js"><link rel="prefetch" href="/assets/js/156.335486f4.js"><link rel="prefetch" href="/assets/js/157.9f9c11f8.js"><link rel="prefetch" href="/assets/js/158.0cdb35e3.js"><link rel="prefetch" href="/assets/js/159.0d18ee42.js"><link rel="prefetch" href="/assets/js/16.d3f33b70.js"><link rel="prefetch" href="/assets/js/160.3b847b9e.js"><link rel="prefetch" href="/assets/js/161.bd731692.js"><link rel="prefetch" href="/assets/js/162.301a6f0b.js"><link rel="prefetch" href="/assets/js/163.010e12c5.js"><link rel="prefetch" href="/assets/js/164.454514c5.js"><link rel="prefetch" href="/assets/js/165.7789af1c.js"><link rel="prefetch" href="/assets/js/166.47d73ba1.js"><link rel="prefetch" href="/assets/js/167.c06b8f78.js"><link rel="prefetch" href="/assets/js/168.61c791ee.js"><link rel="prefetch" href="/assets/js/169.e6f22ddd.js"><link rel="prefetch" href="/assets/js/17.57c1e124.js"><link rel="prefetch" href="/assets/js/170.62d88bd4.js"><link rel="prefetch" href="/assets/js/171.40f772ae.js"><link rel="prefetch" href="/assets/js/172.66b40886.js"><link rel="prefetch" href="/assets/js/173.f34d809d.js"><link rel="prefetch" href="/assets/js/174.db5e3f19.js"><link rel="prefetch" href="/assets/js/175.b56231d5.js"><link rel="prefetch" href="/assets/js/176.00c9a60e.js"><link rel="prefetch" href="/assets/js/177.87d52c78.js"><link rel="prefetch" href="/assets/js/178.31ed8b6d.js"><link rel="prefetch" href="/assets/js/179.fddc207a.js"><link rel="prefetch" href="/assets/js/18.d8759a1e.js"><link rel="prefetch" href="/assets/js/180.621cba53.js"><link rel="prefetch" href="/assets/js/181.2a569de3.js"><link rel="prefetch" href="/assets/js/182.d2a57f56.js"><link rel="prefetch" href="/assets/js/183.092e9d38.js"><link rel="prefetch" href="/assets/js/184.5e18dfc2.js"><link rel="prefetch" href="/assets/js/185.664f0b42.js"><link rel="prefetch" href="/assets/js/186.7e22ed8d.js"><link rel="prefetch" href="/assets/js/187.5c44e025.js"><link rel="prefetch" href="/assets/js/188.91b9bbd8.js"><link rel="prefetch" href="/assets/js/189.6e0b5ebd.js"><link rel="prefetch" href="/assets/js/19.d37b732b.js"><link rel="prefetch" href="/assets/js/190.f6abc3d7.js"><link rel="prefetch" href="/assets/js/191.37390a45.js"><link rel="prefetch" href="/assets/js/192.7cf4020f.js"><link rel="prefetch" href="/assets/js/193.4d3114c9.js"><link rel="prefetch" href="/assets/js/194.e2da3db9.js"><link rel="prefetch" href="/assets/js/195.aafc304f.js"><link rel="prefetch" href="/assets/js/196.0cab5d55.js"><link rel="prefetch" href="/assets/js/197.1b308aef.js"><link rel="prefetch" href="/assets/js/198.027b6ac1.js"><link rel="prefetch" href="/assets/js/199.1ff3911e.js"><link rel="prefetch" href="/assets/js/20.28bae9d0.js"><link rel="prefetch" href="/assets/js/200.64c68854.js"><link rel="prefetch" href="/assets/js/201.4b6d2a10.js"><link rel="prefetch" href="/assets/js/202.0405fd2a.js"><link rel="prefetch" href="/assets/js/203.627a8465.js"><link rel="prefetch" href="/assets/js/204.5b2a60f5.js"><link rel="prefetch" href="/assets/js/205.7480cc4f.js"><link rel="prefetch" href="/assets/js/206.c43a6b50.js"><link rel="prefetch" href="/assets/js/207.279d0107.js"><link rel="prefetch" href="/assets/js/208.c45f6d14.js"><link rel="prefetch" href="/assets/js/209.dfc6cc6f.js"><link rel="prefetch" href="/assets/js/21.c6035f36.js"><link rel="prefetch" href="/assets/js/210.50325915.js"><link rel="prefetch" href="/assets/js/211.01972d87.js"><link rel="prefetch" href="/assets/js/212.c311d763.js"><link rel="prefetch" href="/assets/js/213.ab827bba.js"><link rel="prefetch" href="/assets/js/214.463721d0.js"><link rel="prefetch" href="/assets/js/215.ebf4e434.js"><link rel="prefetch" href="/assets/js/216.6de1df4c.js"><link rel="prefetch" href="/assets/js/217.83ee1c36.js"><link rel="prefetch" href="/assets/js/218.25d4170f.js"><link rel="prefetch" href="/assets/js/219.1d50f281.js"><link rel="prefetch" href="/assets/js/22.4a3e3259.js"><link rel="prefetch" href="/assets/js/220.46055d1c.js"><link rel="prefetch" href="/assets/js/221.6bd64a96.js"><link rel="prefetch" href="/assets/js/222.77b673e9.js"><link rel="prefetch" href="/assets/js/223.bfb2b5a7.js"><link rel="prefetch" href="/assets/js/224.70dc8d60.js"><link rel="prefetch" href="/assets/js/225.ec71b6c3.js"><link rel="prefetch" href="/assets/js/226.5352db61.js"><link rel="prefetch" href="/assets/js/227.ead26aa8.js"><link rel="prefetch" href="/assets/js/228.e5599691.js"><link rel="prefetch" href="/assets/js/229.7b82e7e9.js"><link rel="prefetch" href="/assets/js/23.1f28e8ab.js"><link rel="prefetch" href="/assets/js/230.0d9a8297.js"><link rel="prefetch" href="/assets/js/231.a5a2ae12.js"><link rel="prefetch" href="/assets/js/232.53c542b4.js"><link rel="prefetch" href="/assets/js/233.ae5bb0cc.js"><link rel="prefetch" href="/assets/js/234.6b08420a.js"><link rel="prefetch" href="/assets/js/235.44905de5.js"><link rel="prefetch" href="/assets/js/236.1e42282c.js"><link rel="prefetch" href="/assets/js/237.76ea25ae.js"><link rel="prefetch" href="/assets/js/238.8e8d9c51.js"><link rel="prefetch" href="/assets/js/239.9319cbc0.js"><link rel="prefetch" href="/assets/js/24.3e3b550e.js"><link rel="prefetch" href="/assets/js/240.fc77cb13.js"><link rel="prefetch" href="/assets/js/241.ab189807.js"><link rel="prefetch" href="/assets/js/242.b2900b68.js"><link rel="prefetch" href="/assets/js/243.99a899f3.js"><link rel="prefetch" href="/assets/js/244.c2ee7b93.js"><link rel="prefetch" href="/assets/js/245.de873fa0.js"><link rel="prefetch" href="/assets/js/246.b912dc33.js"><link rel="prefetch" href="/assets/js/247.09b899c5.js"><link rel="prefetch" href="/assets/js/248.54ad9a67.js"><link rel="prefetch" href="/assets/js/249.b39c8a25.js"><link rel="prefetch" href="/assets/js/25.d928c05c.js"><link rel="prefetch" href="/assets/js/250.459bac0e.js"><link rel="prefetch" href="/assets/js/251.39e3ec36.js"><link rel="prefetch" href="/assets/js/252.ec7dbdc8.js"><link rel="prefetch" href="/assets/js/253.50b74f22.js"><link rel="prefetch" href="/assets/js/254.d14e479e.js"><link rel="prefetch" href="/assets/js/255.584eceb2.js"><link rel="prefetch" href="/assets/js/256.ae1c292a.js"><link rel="prefetch" href="/assets/js/257.44c2b8cf.js"><link rel="prefetch" href="/assets/js/258.fa53d821.js"><link rel="prefetch" href="/assets/js/259.774d310d.js"><link rel="prefetch" href="/assets/js/26.f729d047.js"><link rel="prefetch" href="/assets/js/260.c0d77fe0.js"><link rel="prefetch" href="/assets/js/261.ca254cbf.js"><link rel="prefetch" href="/assets/js/262.709eab6a.js"><link rel="prefetch" href="/assets/js/263.1abf59e0.js"><link rel="prefetch" href="/assets/js/264.f8cae5ea.js"><link rel="prefetch" href="/assets/js/265.3bb2db9b.js"><link rel="prefetch" href="/assets/js/266.8fd1f58d.js"><link rel="prefetch" href="/assets/js/267.3d3cb32b.js"><link rel="prefetch" href="/assets/js/268.be1f775d.js"><link rel="prefetch" href="/assets/js/269.956dca63.js"><link rel="prefetch" href="/assets/js/27.bdede19f.js"><link rel="prefetch" href="/assets/js/270.9e3534c2.js"><link rel="prefetch" href="/assets/js/271.19292a6a.js"><link rel="prefetch" href="/assets/js/272.be14a17e.js"><link rel="prefetch" href="/assets/js/273.e501d9dd.js"><link rel="prefetch" href="/assets/js/274.76397e7d.js"><link rel="prefetch" href="/assets/js/275.e33c8288.js"><link rel="prefetch" href="/assets/js/276.7f89722f.js"><link rel="prefetch" href="/assets/js/277.bcb6b0e8.js"><link rel="prefetch" href="/assets/js/278.05ceb6af.js"><link rel="prefetch" href="/assets/js/279.61674e63.js"><link rel="prefetch" href="/assets/js/28.fde9d738.js"><link rel="prefetch" href="/assets/js/280.474c67de.js"><link rel="prefetch" href="/assets/js/281.1e17024e.js"><link rel="prefetch" href="/assets/js/282.db8ddeb6.js"><link rel="prefetch" href="/assets/js/283.b288c8bb.js"><link rel="prefetch" href="/assets/js/284.c417b9e0.js"><link rel="prefetch" href="/assets/js/285.e53d49aa.js"><link rel="prefetch" href="/assets/js/286.4a7baf12.js"><link rel="prefetch" href="/assets/js/287.7591f1b4.js"><link rel="prefetch" href="/assets/js/288.0912053e.js"><link rel="prefetch" href="/assets/js/289.978572a8.js"><link rel="prefetch" href="/assets/js/29.4c8b01c8.js"><link rel="prefetch" href="/assets/js/290.7a85ed94.js"><link rel="prefetch" href="/assets/js/291.847f05eb.js"><link rel="prefetch" href="/assets/js/292.2e44410e.js"><link rel="prefetch" href="/assets/js/293.0d45cdd4.js"><link rel="prefetch" href="/assets/js/294.e3b7b25f.js"><link rel="prefetch" href="/assets/js/295.29a3b26b.js"><link rel="prefetch" href="/assets/js/296.bc4498fc.js"><link rel="prefetch" href="/assets/js/297.c60d8b06.js"><link rel="prefetch" href="/assets/js/298.59a3e24d.js"><link rel="prefetch" href="/assets/js/299.d3c2d424.js"><link rel="prefetch" href="/assets/js/30.ead08016.js"><link rel="prefetch" href="/assets/js/300.df47845b.js"><link rel="prefetch" href="/assets/js/301.cea933c6.js"><link rel="prefetch" href="/assets/js/302.bd59a520.js"><link rel="prefetch" href="/assets/js/303.581ef148.js"><link rel="prefetch" href="/assets/js/304.d5d9f6e2.js"><link rel="prefetch" href="/assets/js/305.135a30a7.js"><link rel="prefetch" href="/assets/js/306.3e0d914a.js"><link rel="prefetch" href="/assets/js/307.336d751e.js"><link rel="prefetch" href="/assets/js/308.65586bfd.js"><link rel="prefetch" href="/assets/js/309.98b1b949.js"><link rel="prefetch" href="/assets/js/31.02f09009.js"><link rel="prefetch" href="/assets/js/310.da87da15.js"><link rel="prefetch" href="/assets/js/311.bde9a024.js"><link rel="prefetch" href="/assets/js/312.14e40f24.js"><link rel="prefetch" href="/assets/js/313.b1f4ac85.js"><link rel="prefetch" href="/assets/js/314.d2c2375a.js"><link rel="prefetch" href="/assets/js/315.05b67707.js"><link rel="prefetch" href="/assets/js/32.f594dd6c.js"><link rel="prefetch" href="/assets/js/33.22124bfe.js"><link rel="prefetch" href="/assets/js/34.c7844b35.js"><link rel="prefetch" href="/assets/js/35.d5667642.js"><link rel="prefetch" href="/assets/js/36.bfcf6d37.js"><link rel="prefetch" href="/assets/js/37.a4d69365.js"><link rel="prefetch" href="/assets/js/38.43349fb3.js"><link rel="prefetch" href="/assets/js/39.7f29dbb5.js"><link rel="prefetch" href="/assets/js/4.c3c7a0a0.js"><link rel="prefetch" href="/assets/js/40.226573d8.js"><link rel="prefetch" href="/assets/js/41.cd73bf3a.js"><link rel="prefetch" href="/assets/js/42.7a0d2976.js"><link rel="prefetch" href="/assets/js/43.147ef265.js"><link rel="prefetch" href="/assets/js/44.c1dd092f.js"><link rel="prefetch" href="/assets/js/45.88b2cfe8.js"><link rel="prefetch" href="/assets/js/46.bb43d167.js"><link rel="prefetch" href="/assets/js/47.66ae3bd6.js"><link rel="prefetch" href="/assets/js/48.bcd2f5d6.js"><link rel="prefetch" href="/assets/js/49.c903111d.js"><link rel="prefetch" href="/assets/js/5.5de918b4.js"><link rel="prefetch" href="/assets/js/50.6adf0c95.js"><link rel="prefetch" href="/assets/js/51.615afeb8.js"><link rel="prefetch" href="/assets/js/52.22cb9534.js"><link rel="prefetch" href="/assets/js/53.d564fb68.js"><link rel="prefetch" href="/assets/js/54.6c46a3be.js"><link rel="prefetch" href="/assets/js/55.7ec62261.js"><link rel="prefetch" href="/assets/js/56.5ffc667f.js"><link rel="prefetch" href="/assets/js/57.df564138.js"><link rel="prefetch" href="/assets/js/58.2d159677.js"><link rel="prefetch" href="/assets/js/59.09e6acd1.js"><link rel="prefetch" href="/assets/js/6.cd61b72d.js"><link rel="prefetch" href="/assets/js/60.661799f1.js"><link rel="prefetch" href="/assets/js/61.a3060f18.js"><link rel="prefetch" href="/assets/js/62.a3cf22ac.js"><link rel="prefetch" href="/assets/js/63.3b40fb26.js"><link rel="prefetch" href="/assets/js/64.8f122a85.js"><link rel="prefetch" href="/assets/js/65.94ea6a7d.js"><link rel="prefetch" href="/assets/js/66.3264570a.js"><link rel="prefetch" href="/assets/js/67.f734cf4f.js"><link rel="prefetch" href="/assets/js/68.b77f9c45.js"><link rel="prefetch" href="/assets/js/69.670dfecb.js"><link rel="prefetch" href="/assets/js/7.01237d8a.js"><link rel="prefetch" href="/assets/js/70.41c1d50c.js"><link rel="prefetch" href="/assets/js/71.189eb12c.js"><link rel="prefetch" href="/assets/js/72.fbf11f49.js"><link rel="prefetch" href="/assets/js/73.88a8dcf6.js"><link rel="prefetch" href="/assets/js/74.1bfdaebd.js"><link rel="prefetch" href="/assets/js/75.f3deb353.js"><link rel="prefetch" href="/assets/js/76.39ec7a35.js"><link rel="prefetch" href="/assets/js/77.014da067.js"><link rel="prefetch" href="/assets/js/78.968423fd.js"><link rel="prefetch" href="/assets/js/79.43c62e31.js"><link rel="prefetch" href="/assets/js/8.69c06f54.js"><link rel="prefetch" href="/assets/js/80.724ba85c.js"><link rel="prefetch" href="/assets/js/81.2723018a.js"><link rel="prefetch" href="/assets/js/82.9454fd50.js"><link rel="prefetch" href="/assets/js/83.cac4dd34.js"><link rel="prefetch" href="/assets/js/84.335ad95e.js"><link rel="prefetch" href="/assets/js/85.97815704.js"><link rel="prefetch" href="/assets/js/86.521caa3b.js"><link rel="prefetch" href="/assets/js/87.79820634.js"><link rel="prefetch" href="/assets/js/89.7e873ca5.js"><link rel="prefetch" href="/assets/js/9.8272e5e4.js"><link rel="prefetch" href="/assets/js/90.76049e9d.js"><link rel="prefetch" href="/assets/js/91.149569a8.js"><link rel="prefetch" href="/assets/js/92.09f6f94f.js"><link rel="prefetch" href="/assets/js/93.41bc1e06.js"><link rel="prefetch" href="/assets/js/94.e362cc78.js"><link rel="prefetch" href="/assets/js/95.0f881321.js"><link rel="prefetch" href="/assets/js/96.64599b83.js"><link rel="prefetch" href="/assets/js/97.7b0289c3.js"><link rel="prefetch" href="/assets/js/98.f4b38e7a.js"><link rel="prefetch" href="/assets/js/99.0b40f59f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.49dd1267.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Memorydoc</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大前端" class="dropdown-title"><a href="/web/" class="link-title">大前端</a> <span class="title" style="display:none;">大前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/javascript/" class="nav-link">《JavaScript教程》</a></li><li class="dropdown-subitem"><a href="/note/js/" class="nav-link">《JavaScript高级程序设计》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《ES6 教程》</a></li><li class="dropdown-subitem"><a href="/note/vue/" class="nav-link">《Vue》</a></li><li class="dropdown-subitem"><a href="/note/react/" class="nav-link">《React》</a></li><li class="dropdown-subitem"><a href="/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git》</a></li><li class="dropdown-subitem"><a href="/pages/51afd6/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/pages/4643cd/" class="nav-link">JS设计模式总结</a></li><li class="dropdown-subitem"><a href="/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/pages/4c778760be26d8b3/" class="nav-link">前端拓展</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术架构" class="dropdown-title"><a href="/technology/" class="link-title">技术架构</a> <span class="title" style="display:none;">技术架构</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>编程之道</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/55a87c/" class="nav-link">并发编程</a></li><li class="dropdown-subitem"><a href="/pages/548fa0/" class="nav-link">设计模式</a></li><li class="dropdown-subitem"><a href="/pages/88f12b/" class="nav-link">数据结构算法</a></li><li class="dropdown-subitem"><a href="/pages/8a3eef/" class="nav-link">技术拓展</a></li><li class="dropdown-subitem"><a href="/pages/e8b493/" class="nav-link">技术陷阱</a></li><li class="dropdown-subitem"><a href="/pages/86d7d4/" class="nav-link">面试宝典</a></li></ul></li><li class="dropdown-item"><h4>分布式</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/1b9fb0/" aria-current="page" class="nav-link router-link-exact-active router-link-active">微服务</a></li><li class="dropdown-subitem"><a href="/pages/741469/" class="nav-link">数据库</a></li></ul></li><li class="dropdown-item"><h4>项目优化实战</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/1b9fb0/.html" class="nav-link">JVM 优化</a></li><li class="dropdown-subitem"><a href="/pages/1b9fb0/.html" class="nav-link">线程池优化</a></li><li class="dropdown-subitem"><a href="/pages/1b9fb0/.html" class="nav-link">模板引擎优化</a></li><li class="dropdown-subitem"><a href="/pages/1b9fb0/.html" class="nav-link">任务调度优化</a></li><li class="dropdown-subitem"><a href="/pages/1b9fb0/.html" class="nav-link">内存优化</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/Memorydoc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/touxiang.png"> <div class="blogger-info"><h3>Memorydoc</h3> <span>术尚可求</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大前端" class="dropdown-title"><a href="/web/" class="link-title">大前端</a> <span class="title" style="display:none;">大前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/javascript/" class="nav-link">《JavaScript教程》</a></li><li class="dropdown-subitem"><a href="/note/js/" class="nav-link">《JavaScript高级程序设计》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《ES6 教程》</a></li><li class="dropdown-subitem"><a href="/note/vue/" class="nav-link">《Vue》</a></li><li class="dropdown-subitem"><a href="/note/react/" class="nav-link">《React》</a></li><li class="dropdown-subitem"><a href="/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git》</a></li><li class="dropdown-subitem"><a href="/pages/51afd6/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/pages/4643cd/" class="nav-link">JS设计模式总结</a></li><li class="dropdown-subitem"><a href="/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/pages/4c778760be26d8b3/" class="nav-link">前端拓展</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术架构" class="dropdown-title"><a href="/technology/" class="link-title">技术架构</a> <span class="title" style="display:none;">技术架构</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>编程之道</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/55a87c/" class="nav-link">并发编程</a></li><li class="dropdown-subitem"><a href="/pages/548fa0/" class="nav-link">设计模式</a></li><li class="dropdown-subitem"><a href="/pages/88f12b/" class="nav-link">数据结构算法</a></li><li class="dropdown-subitem"><a href="/pages/8a3eef/" class="nav-link">技术拓展</a></li><li class="dropdown-subitem"><a href="/pages/e8b493/" class="nav-link">技术陷阱</a></li><li class="dropdown-subitem"><a href="/pages/86d7d4/" class="nav-link">面试宝典</a></li></ul></li><li class="dropdown-item"><h4>分布式</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/1b9fb0/" aria-current="page" class="nav-link router-link-exact-active router-link-active">微服务</a></li><li class="dropdown-subitem"><a href="/pages/741469/" class="nav-link">数据库</a></li></ul></li><li class="dropdown-item"><h4>项目优化实战</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/1b9fb0/.html" class="nav-link">JVM 优化</a></li><li class="dropdown-subitem"><a href="/pages/1b9fb0/.html" class="nav-link">线程池优化</a></li><li class="dropdown-subitem"><a href="/pages/1b9fb0/.html" class="nav-link">模板引擎优化</a></li><li class="dropdown-subitem"><a href="/pages/1b9fb0/.html" class="nav-link">任务调度优化</a></li><li class="dropdown-subitem"><a href="/pages/1b9fb0/.html" class="nav-link">内存优化</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/Memorydoc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>并发编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>设计模式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>技术拓展</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>技术陷阱</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>面试宝典</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>微服务</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/1b9fb0/" aria-current="page" class="active sidebar-link">Redis</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/1b9fb0/#redis-简介" class="sidebar-link">Redis 简介</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/1b9fb0/#什么是-redis" class="sidebar-link">什么是 Redis</a></li><li class="sidebar-sub-header"><a href="/pages/1b9fb0/#redis-的应用场景" class="sidebar-link">Redis 的应用场景</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/1b9fb0/#redis-ha-方案" class="sidebar-link">Redis HA 方案</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/1b9fb0/#概述" class="sidebar-link">概述</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/1b9fb0/#redis-sentinel-集群部署" class="sidebar-link">Redis Sentinel 集群部署</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/1b9fb0/#概述-2" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/pages/1b9fb0/#redis-sentinel-核心配置" class="sidebar-link">Redis Sentinel 核心配置</a></li><li class="sidebar-sub-header"><a href="/pages/1b9fb0/#搭建-redis-集群" class="sidebar-link">搭建 Redis 集群</a></li><li class="sidebar-sub-header"><a href="/pages/1b9fb0/#搭建-sentinel-集群" class="sidebar-link">搭建 Sentinel 集群</a></li><li class="sidebar-sub-header"><a href="/pages/1b9fb0/#修改-sentinel-配置文件" class="sidebar-link">修改 Sentinel 配置文件</a></li><li class="sidebar-sub-header"><a href="/pages/1b9fb0/#查看集群是否生效" class="sidebar-link">查看集群是否生效</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/1b9fb0/#redis-命令汇总" class="sidebar-link">Redis 命令汇总</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/1b9fb0/#参考资料" class="sidebar-link">参考资料</a></li><li class="sidebar-sub-header"><a href="/pages/1b9fb0/#连接操作相关的命令" class="sidebar-link">连接操作相关的命令</a></li><li class="sidebar-sub-header"><a href="/pages/1b9fb0/#服务端相关命令" class="sidebar-link">服务端相关命令</a></li><li class="sidebar-sub-header"><a href="/pages/1b9fb0/#对-key-操作的命令" class="sidebar-link">对 KEY 操作的命令</a></li><li class="sidebar-sub-header"><a href="/pages/1b9fb0/#对-string-操作的命令" class="sidebar-link">对 String 操作的命令</a></li><li class="sidebar-sub-header"><a href="/pages/1b9fb0/#对-list-操作的命令" class="sidebar-link">对 List 操作的命令</a></li><li class="sidebar-sub-header"><a href="/pages/1b9fb0/#对-set-操作的命令" class="sidebar-link">对 Set 操作的命令</a></li><li class="sidebar-sub-header"><a href="/pages/1b9fb0/#对-hash-操作的命令" class="sidebar-link">对 Hash 操作的命令</a></li><li class="sidebar-sub-header"><a href="/pages/1b9fb0/#redis-sentinel" class="sidebar-link">Redis Sentinel</a></li></ul></li></ul></li><li><a href="/pages/a0f472/" class="sidebar-link">分布式锁</a></li><li><a href="/pages/8ddde3/" class="sidebar-link">Zookeeper</a></li><li><a href="/pages/9d5b5a/" class="sidebar-link">定时任务</a></li><li><a href="/pages/3d8a22/" class="sidebar-link">RPC实现原理</a></li><li><a href="/pages/abde57/" class="sidebar-link">网站限流</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>项目优化背景</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JVM优化</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-d5e9d2e6><div class="articleInfo" data-v-d5e9d2e6><ul class="breadcrumbs" data-v-d5e9d2e6><li data-v-d5e9d2e6><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-d5e9d2e6></a></li> <li data-v-d5e9d2e6><a href="/technology/#技术架构" data-v-d5e9d2e6>技术架构</a></li><li data-v-d5e9d2e6><a href="/technology/#微服务" data-v-d5e9d2e6>微服务</a></li></ul> <div class="info" data-v-d5e9d2e6><div title="作者" class="author iconfont icon-touxiang" data-v-d5e9d2e6><a href="https://github.com/Memorydoc" target="_blank" title="作者" class="beLink" data-v-d5e9d2e6>Memorydoc</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-d5e9d2e6><a href="javascript:;" data-v-d5e9d2e6>2022-03-07</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">Redis<!----></h1>  <div class="theme-vdoing-content content__default"><h2 id="redis-简介"><a href="#redis-简介" class="header-anchor">#</a> Redis 简介</h2> <p>【视频】项目实战-iToken-数据缓存服务-Redis 简介</p> <h3 id="什么是-redis"><a href="#什么是-redis" class="header-anchor">#</a> 什么是 Redis</h3> <p>Redis 是用 C 语言开发的一个开源的高性能键值对（key-value）数据库。它通过提供多种键值数据类型来适应不同场景下的存储需求，目前为止 Redis 支持的键值数据类型如下：</p> <p>字符串类型
散列类型
列表类型
集合类型
有序集合类型</p> <h3 id="redis-的应用场景"><a href="#redis-的应用场景" class="header-anchor">#</a> Redis 的应用场景</h3> <p>缓存（数据查询、短连接、新闻内容、商品内容等等）
分布式集群架构中的 session 分离
聊天室的在线好友列表
任务队列（秒杀、抢购、12306 等等）
应用排行榜
网站访问统计
数据过期处理（可以精确到毫秒）</p> <h2 id="redis-ha-方案"><a href="#redis-ha-方案" class="header-anchor">#</a> Redis HA 方案</h2> <h3 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h3> <p>HA(High Available，高可用性群集)机集群系统简称，是保证业务连续性的有效解决方案，一般有两个或两个以上的节点，且分为活动节点及备用节点。通常把正在执 行业务的称为活动节点，而作为活动节点的一个备份的则称为备用节点。当活动节点出现问题，导致正在运行的业务（任务）不能正常运行时，备用节点此时就会侦测到，并立即接续活动节点来执行业务。从而实现业务的不中断或短暂中断。</p> <p>Redis 一般以主/从方式部署（这里讨论的应用从实例主要用于备份，主实例提供读写）该方式要实现 HA 主要有如下几种方案：</p> <ul><li>keepalived： 通过 keepalived 的虚拟 IP，提供主从的统一访问，在主出现问题时， 通过 keepalived 运行脚本将从提升为主，待主恢复后先同步后自动变为主，该方案的好处是主从切换后，应用程序不需要知道(因为访问的虚拟 IP 不变)，坏处是引入 keepalived 增加部署复杂性，在有些情况下会导致数据丢失</li> <li>zookeeper： 通过 zookeeper 来监控主从实例， 维护最新有效的 IP， 应用通过 zookeeper 取得 IP，对 Redis 进行访问，该方案需要编写大量的监控代码</li> <li>sentinel： 通过 Sentinel 监控主从实例，自动进行故障恢复，该方案有个缺陷：因为主从实例地址( IP &amp; PORT )是不同的，当故障发生进行主从切换后，应用程序无法知道新地址，故在 Jedis2.2.2 中新增了对 Sentinel 的支持，应用通过 redis.clients.jedis.JedisSentinelPool.getResource() 取得的 Jedis 实例会及时更新到新的主实例地址</li></ul> <p><img src="/img/microservice/redis1.png" alt="redis1"> <strong>注意：</strong> sentinel 是解决 HA 问题的，cluster 是解决主从复制问题的，不重复，并且经常一起用</p> <h2 id="redis-sentinel-集群部署"><a href="#redis-sentinel-集群部署" class="header-anchor">#</a> Redis Sentinel 集群部署</h2> <h3 id="概述-2"><a href="#概述-2" class="header-anchor">#</a> 概述</h3> <p>Redis 集群可以在一组 redis 节点之间实现高可用性和 sharding。在集群中会有 1 个 master 和多个 slave 节点。当 master 节点失效时，应选举出一个 slave 节点作为新的 master。然而 Redis 本身(包括它的很多客户端)没有实现自动故障发现并进行主备切换的能力，需要外部的监控方案来实现自动故障恢复。</p> <p>Redis Sentinel 是官方推荐的高可用性解决方案。它是 Redis 集群的监控管理工具，可以提供节点监控、通知、自动故障恢复和客户端配置发现服务。
<img src="/img/microservice/redis2.png" alt="redis1"></p> <h3 id="redis-sentinel-核心配置"><a href="#redis-sentinel-核心配置" class="header-anchor">#</a> Redis Sentinel 核心配置</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># Example sentinel.conf</span>

<span class="token comment"># *** IMPORTANT ***</span>
<span class="token comment">#</span>
<span class="token comment"># By default Sentinel will not be reachable from interfaces different than</span>
<span class="token comment"># localhost, either use the 'bind' directive to bind to a list of network</span>
<span class="token comment"># interfaces, or disable protected mode with &quot;protected-mode no&quot; by</span>
<span class="token comment"># adding it to this configuration file.</span>
<span class="token comment">#</span>
<span class="token comment"># Before doing that MAKE SURE the instance is protected from the outside</span>
<span class="token comment"># world via firewalling or other means.</span>
<span class="token comment">#</span>
<span class="token comment"># For example you may use one of the following:</span>
<span class="token comment">#</span>
<span class="token comment"># bind 127.0.0.1 192.168.1.1</span>
<span class="token comment">#</span>
<span class="token comment"># protected-mode no</span>

<span class="token comment"># port &lt;sentinel-port&gt;</span>
<span class="token comment"># The port that this sentinel instance will run on</span>
port <span class="token number">26379</span>

<span class="token comment"># sentinel announce-ip &lt;ip&gt;</span>
<span class="token comment"># sentinel announce-port &lt;port&gt;</span>
<span class="token comment">#</span>
<span class="token comment"># The above two configuration directives are useful in environments where,</span>
<span class="token comment"># because of NAT, Sentinel is reachable from outside via a non-local address.</span>
<span class="token comment">#</span>
<span class="token comment"># When announce-ip is provided, the Sentinel will claim the specified IP address</span>
<span class="token comment"># in HELLO messages used to gossip its presence, instead of auto-detecting the</span>
<span class="token comment"># local address as it usually does.</span>
<span class="token comment">#</span>
<span class="token comment"># Similarly when announce-port is provided and is valid and non-zero, Sentinel</span>
<span class="token comment"># will announce the specified TCP port.</span>
<span class="token comment">#</span>
<span class="token comment"># The two options don't need to be used together, if only announce-ip is</span>
<span class="token comment"># provided, the Sentinel will announce the specified IP and the server port</span>
<span class="token comment"># as specified by the &quot;port&quot; option. If only announce-port is provided, the</span>
<span class="token comment"># Sentinel will announce the auto-detected local IP and the specified port.</span>
<span class="token comment">#</span>
<span class="token comment"># Example:</span>
<span class="token comment">#</span>
<span class="token comment"># sentinel announce-ip 1.2.3.4</span>

<span class="token comment"># dir &lt;working-directory&gt;</span>
<span class="token comment"># Every long running process should have a well-defined working directory.</span>
<span class="token comment"># For Redis Sentinel to chdir to /tmp at startup is the simplest thing</span>
<span class="token comment"># for the process to don't interfere with administrative tasks such as</span>
<span class="token comment"># unmounting filesystems.</span>
<span class="token function">dir</span> /tmp

<span class="token comment"># sentinel monitor &lt;master-name&gt; &lt;ip&gt; &lt;redis-port&gt; &lt;quorum&gt;</span>
<span class="token comment">#</span>
<span class="token comment"># Tells Sentinel to monitor this master, and to consider it in O_DOWN</span>
<span class="token comment"># (Objectively Down) state only if at least &lt;quorum&gt; sentinels agree.</span>
<span class="token comment">#</span>
<span class="token comment"># Note that whatever is the ODOWN quorum, a Sentinel will require to</span>
<span class="token comment"># be elected by the majority of the known Sentinels in order to</span>
<span class="token comment"># start a failover, so no failover can be performed in minority.</span>
<span class="token comment">#</span>
<span class="token comment"># Slaves are auto-discovered, so you don't need to specify slaves in</span>
<span class="token comment"># any way. Sentinel itself will rewrite this configuration file adding</span>
<span class="token comment"># the slaves using additional configuration options.</span>
<span class="token comment"># Also note that the configuration file is rewritten when a</span>
<span class="token comment"># slave is promoted to master.</span>
<span class="token comment">#</span>
<span class="token comment"># Note: master name should not include special characters or spaces.</span>
<span class="token comment"># The valid charset is A-z 0-9 and the three characters &quot;.-_&quot;.</span>
sentinel monitor mymaster <span class="token number">127.0</span>.0.1 <span class="token number">6379</span> <span class="token number">2</span>

<span class="token comment"># sentinel auth-pass &lt;master-name&gt; &lt;password&gt;</span>
<span class="token comment">#</span>
<span class="token comment"># Set the password to use to authenticate with the master and slaves.</span>
<span class="token comment"># Useful if there is a password set in the Redis instances to monitor.</span>
<span class="token comment">#</span>
<span class="token comment"># Note that the master password is also used for slaves, so it is not</span>
<span class="token comment"># possible to set a different password in masters and slaves instances</span>
<span class="token comment"># if you want to be able to monitor these instances with Sentinel.</span>
<span class="token comment">#</span>
<span class="token comment"># However you can have Redis instances without the authentication enabled</span>
<span class="token comment"># mixed with Redis instances requiring the authentication (as long as the</span>
<span class="token comment"># password set is the same for all the instances requiring the password) as</span>
<span class="token comment"># the AUTH command will have no effect in Redis instances with authentication</span>
<span class="token comment"># switched off.</span>
<span class="token comment">#</span>
<span class="token comment"># Example:</span>
<span class="token comment">#</span>
<span class="token comment"># sentinel auth-pass mymaster MySUPER--secret-0123passw0rd</span>

<span class="token comment"># sentinel down-after-milliseconds &lt;master-name&gt; &lt;milliseconds&gt;</span>
<span class="token comment">#</span>
<span class="token comment"># Number of milliseconds the master (or any attached slave or sentinel) should</span>
<span class="token comment"># be unreachable (as in, not acceptable reply to PING, continuously, for the</span>
<span class="token comment"># specified period) in order to consider it in S_DOWN state (Subjectively</span>
<span class="token comment"># Down).</span>
<span class="token comment">#</span>
<span class="token comment"># Default is 30 seconds.</span>
sentinel down-after-milliseconds mymaster <span class="token number">30000</span>

<span class="token comment"># sentinel parallel-syncs &lt;master-name&gt; &lt;numslaves&gt;</span>
<span class="token comment">#</span>
<span class="token comment"># How many slaves we can reconfigure to point to the new slave simultaneously</span>
<span class="token comment"># during the failover. Use a low number if you use the slaves to serve query</span>
<span class="token comment"># to avoid that all the slaves will be unreachable at about the same</span>
<span class="token comment"># time while performing the synchronization with the master.</span>
sentinel parallel-syncs mymaster <span class="token number">1</span>

<span class="token comment"># sentinel failover-timeout &lt;master-name&gt; &lt;milliseconds&gt;</span>
<span class="token comment">#</span>
<span class="token comment"># Specifies the failover timeout in milliseconds. It is used in many ways:</span>
<span class="token comment">#</span>
<span class="token comment"># - The time needed to re-start a failover after a previous failover was</span>
<span class="token comment">#   already tried against the same master by a given Sentinel, is two</span>
<span class="token comment">#   times the failover timeout.</span>
<span class="token comment">#</span>
<span class="token comment"># - The time needed for a slave replicating to a wrong master according</span>
<span class="token comment">#   to a Sentinel current configuration, to be forced to replicate</span>
<span class="token comment">#   with the right master, is exactly the failover timeout (counting since</span>
<span class="token comment">#   the moment a Sentinel detected the misconfiguration).</span>
<span class="token comment">#</span>
<span class="token comment"># - The time needed to cancel a failover that is already in progress but</span>
<span class="token comment">#   did not produced any configuration change (SLAVEOF NO ONE yet not</span>
<span class="token comment">#   acknowledged by the promoted slave).</span>
<span class="token comment">#</span>
<span class="token comment"># - The maximum time a failover in progress waits for all the slaves to be</span>
<span class="token comment">#   reconfigured as slaves of the new master. However even after this time</span>
<span class="token comment">#   the slaves will be reconfigured by the Sentinels anyway, but not with</span>
<span class="token comment">#   the exact parallel-syncs progression as specified.</span>
<span class="token comment">#</span>
<span class="token comment"># Default is 3 minutes.</span>
sentinel failover-timeout mymaster <span class="token number">180000</span>

<span class="token comment"># SCRIPTS EXECUTION</span>
<span class="token comment">#</span>
<span class="token comment"># sentinel notification-script and sentinel reconfig-script are used in order</span>
<span class="token comment"># to configure scripts that are called to notify the system administrator</span>
<span class="token comment"># or to reconfigure clients after a failover. The scripts are executed</span>
<span class="token comment"># with the following rules for error handling:</span>
<span class="token comment">#</span>
<span class="token comment"># If script exits with &quot;1&quot; the execution is retried later (up to a maximum</span>
<span class="token comment"># number of times currently set to 10).</span>
<span class="token comment">#</span>
<span class="token comment"># If script exits with &quot;2&quot; (or an higher value) the script execution is</span>
<span class="token comment"># not retried.</span>
<span class="token comment">#</span>
<span class="token comment"># If script terminates because it receives a signal the behavior is the same</span>
<span class="token comment"># as exit code 1.</span>
<span class="token comment">#</span>
<span class="token comment"># A script has a maximum running time of 60 seconds. After this limit is</span>
<span class="token comment"># reached the script is terminated with a SIGKILL and the execution retried.</span>

<span class="token comment"># NOTIFICATION SCRIPT</span>
<span class="token comment">#</span>
<span class="token comment"># sentinel notification-script &lt;master-name&gt; &lt;script-path&gt;</span>
<span class="token comment"># </span>
<span class="token comment"># Call the specified notification script for any sentinel event that is</span>
<span class="token comment"># generated in the WARNING level (for instance -sdown, -odown, and so forth).</span>
<span class="token comment"># This script should notify the system administrator via email, SMS, or any</span>
<span class="token comment"># other messaging system, that there is something wrong with the monitored</span>
<span class="token comment"># Redis systems.</span>
<span class="token comment">#</span>
<span class="token comment"># The script is called with just two arguments: the first is the event type</span>
<span class="token comment"># and the second the event description.</span>
<span class="token comment">#</span>
<span class="token comment"># The script must exist and be executable in order for sentinel to start if</span>
<span class="token comment"># this option is provided.</span>
<span class="token comment">#</span>
<span class="token comment"># Example:</span>
<span class="token comment">#</span>
<span class="token comment"># sentinel notification-script mymaster /var/redis/notify.sh</span>

<span class="token comment"># CLIENTS RECONFIGURATION SCRIPT</span>
<span class="token comment">#</span>
<span class="token comment"># sentinel client-reconfig-script &lt;master-name&gt; &lt;script-path&gt;</span>
<span class="token comment">#</span>
<span class="token comment"># When the master changed because of a failover a script can be called in</span>
<span class="token comment"># order to perform application-specific tasks to notify the clients that the</span>
<span class="token comment"># configuration has changed and the master is at a different address.</span>
<span class="token comment"># </span>
<span class="token comment"># The following arguments are passed to the script:</span>
<span class="token comment">#</span>
<span class="token comment"># &lt;master-name&gt; &lt;role&gt; &lt;state&gt; &lt;from-ip&gt; &lt;from-port&gt; &lt;to-ip&gt; &lt;to-port&gt;</span>
<span class="token comment">#</span>
<span class="token comment"># &lt;state&gt; is currently always &quot;failover&quot;</span>
<span class="token comment"># &lt;role&gt; is either &quot;leader&quot; or &quot;observer&quot;</span>
<span class="token comment"># </span>
<span class="token comment"># The arguments from-ip, from-port, to-ip, to-port are used to communicate</span>
<span class="token comment"># the old address of the master and the new address of the elected slave</span>
<span class="token comment"># (now a master).</span>
<span class="token comment">#</span>
<span class="token comment"># This script should be resistant to multiple invocations.</span>
<span class="token comment">#</span>
<span class="token comment"># Example:</span>
<span class="token comment">#</span>
<span class="token comment"># sentinel client-reconfig-script mymaster /var/redis/reconfig.sh</span>

<span class="token comment"># SECURITY</span>
<span class="token comment">#</span>
<span class="token comment"># By default SENTINEL SET will not be able to change the notification-script</span>
<span class="token comment"># and client-reconfig-script at runtime. This avoids a trivial security issue</span>
<span class="token comment"># where clients can set the script to anything and trigger a failover in order</span>
<span class="token comment"># to get the program executed.</span>

sentinel deny-scripts-reconfig <span class="token function">yes</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br></div></div><h3 id="搭建-redis-集群"><a href="#搭建-redis-集群" class="header-anchor">#</a> 搭建 Redis 集群</h3> <p>搭建一主两从环境，docker-compose.yml 配置如下：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>version: <span class="token string">'3.1'</span>
services:
  master:
    image: redis
    container_name: redis-master
    ports:
      - <span class="token number">6379</span>:6379

  slave1:
    image: redis
    container_name: redis-slave-1
    ports:
      - <span class="token number">6380</span>:6379
    command: redis-server --slaveof redis-master <span class="token number">6379</span>

  slave2:
    image: redis
    container_name: redis-slave-2
    ports:
      - <span class="token number">6381</span>:6379
    command: redis-server --slaveof redis-master <span class="token number">6379</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="搭建-sentinel-集群"><a href="#搭建-sentinel-集群" class="header-anchor">#</a> 搭建 Sentinel 集群</h3> <p>我们至少需要创建三个 Sentinel 服务，docker-compose.yml 配置如下：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>version: <span class="token string">'3.1'</span>
services:
  sentinel1:
    image: redis
    container_name: redis-sentinel-1
    ports:
      - <span class="token number">26379</span>:26379
    command: redis-sentinel /usr/local/etc/redis/sentinel.conf
    volumes:
      - ./sentinel1.conf:/usr/local/etc/redis/sentinel.conf

  sentinel2:
    image: redis
    container_name: redis-sentinel-2
    ports:
      - <span class="token number">26380</span>:26379
    command: redis-sentinel /usr/local/etc/redis/sentinel.conf
    volumes:
      - ./sentinel2.conf:/usr/local/etc/redis/sentinel.conf

  sentinel3:
    image: redis
    container_name: redis-sentinel-3
    ports:
      - <span class="token number">26381</span>:26379
    command: redis-sentinel /usr/local/etc/redis/sentinel.conf
    volumes:
      - ./sentinel3.conf:/usr/local/etc/redis/sentinel.conf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="修改-sentinel-配置文件"><a href="#修改-sentinel-配置文件" class="header-anchor">#</a> 修改 Sentinel 配置文件</h3> <p>需要三份 sentinel.conf 配置文件，分别为 sentinel1.conf，sentinel2.conf，sentinel3.conf，配置文件内容相同</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>port <span class="token number">26379</span>
<span class="token function">dir</span> /tmp
<span class="token comment"># 自定义集群名，其中 127.0.0.1 为 redis-master 的 ip，6379 为 redis-master 的端口，2 为最小投票数（因为有 3 台 Sentinel 所以可以设置成 2）</span>
sentinel monitor mymaster <span class="token number">127.0</span>.0.1 <span class="token number">6379</span> <span class="token number">2</span>
sentinel down-after-milliseconds mymaster <span class="token number">30000</span>
sentinel parallel-syncs mymaster <span class="token number">1</span>
sentinel failover-timeout mymaster <span class="token number">180000</span>
sentinel deny-scripts-reconfig <span class="token function">yes</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="查看集群是否生效"><a href="#查看集群是否生效" class="header-anchor">#</a> 查看集群是否生效</h3> <p>进入 Sentinel 容器，使用 Sentinel API 查看监控情况：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> -it redis-sentinel-1 /bin/bash
redis-cli -p <span class="token number">26379</span>
sentinel master mymaster
sentinel slaves mymaster
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="/img/microservice/redis3.png" alt="redis1"></p> <h2 id="redis-命令汇总"><a href="#redis-命令汇总" class="header-anchor">#</a> Redis 命令汇总</h2> <h3 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h3> <p>http://redisdoc.com/
http://redis.io/commands</p> <h3 id="连接操作相关的命令"><a href="#连接操作相关的命令" class="header-anchor">#</a> 连接操作相关的命令</h3> <ul><li>ping：测试连接是否存活如果正常会返回 pong</li> <li>echo：打印</li> <li>select：切换到指定的数据库，数据库索引号 index 用数字值指定，以 0 作为起始索引值</li> <li>quit：关闭连接（connection）</li> <li>auth：简单密码认证</li></ul> <h3 id="服务端相关命令"><a href="#服务端相关命令" class="header-anchor">#</a> 服务端相关命令</h3> <ul><li>time：返回当前服务器时间</li> <li>client list: 返回所有连接到服务器的客户端信息和统计数据 参见 http://redisdoc.com/server/client_list.html</li> <li>client kill ip:port：关闭地址为 ip:port 的客户端</li> <li>save：将数据同步保存到磁盘</li> <li>bgsave：将数据异步保存到磁盘</li> <li>lastsave：返回上次成功将数据保存到磁盘的Unix时戳</li> <li>shundown：将数据同步保存到磁盘，然后关闭服务</li> <li>info：提供服务器的信息和统计</li> <li>config resetstat：重置 info 命令中的某些统计数据</li> <li>config get：获取配置文件信息</li> <li>config set：动态地调整 Redis 服务器的配置(configuration)而无须重启，可以修改的配置参数可以使用命令 CONFIG GET * 来列出</li> <li>config rewrite：Redis 服务器时所指定的 redis.conf 文件进行改写</li> <li>monitor：实时转储收到的请求</li> <li>slaveof：改变复制策略设置
###发布订阅相关命令</li> <li>psubscribe：订阅一个或多个符合给定模式的频道 例如 psubscribe news.* tweet.*</li> <li>publish：将信息 message 发送到指定的频道 channel 例如 publish msg &quot;good morning&quot;</li> <li>pubsub channels：列出当前的活跃频道 例如 PUBSUB CHANNELS news.i*</li> <li>pubsub numsub：返回给定频道的订阅者数量 例如 PUBSUB NUMSUB news.it news.internet news.sport news.music</li> <li>pubsub numpat：返回客户端订阅的所有模式的数量总和</li> <li>punsubscribe：指示客户端退订所有给定模式。</li> <li>subscribe：订阅给定的一个或多个频道的信息。例如 subscribe msg chat_room</li> <li>unsubscribe：指示客户端退订给定的频道。</li></ul> <h3 id="对-key-操作的命令"><a href="#对-key-操作的命令" class="header-anchor">#</a> 对 KEY 操作的命令</h3> <ul><li>exists(key)：确认一个 key 是否存在</li> <li>del(key)：删除一个 key</li> <li>type(key)：返回值的类型</li> <li>keys(pattern)：返回满足给定 pattern 的所有 key</li> <li>randomkey：随机返回 key 空间的一个</li> <li>keyrename(oldname, newname)：重命名 key</li> <li>dbsize：返回当前数据库中 key 的数目</li> <li>expire：设定一个 key 的活动时间（s）</li> <li>ttl：获得一个 key 的活动时间</li> <li>move(key, dbindex)：移动当前数据库中的 key 到 dbindex 数据库</li> <li>flushdb：删除当前选择数据库中的所有 key</li> <li>flushall：删除所有数据库中的所有 key</li></ul> <h3 id="对-string-操作的命令"><a href="#对-string-操作的命令" class="header-anchor">#</a> 对 String 操作的命令</h3> <ul><li>set(key, value)：给数据库中名称为 key 的 string 赋予值 value</li> <li>get(key)：返回数据库中名称为 key 的 string 的 value</li> <li>getset(key, value)：给名称为 key 的 string 赋予上一次的 value</li> <li>mget(key1, key2,…, key N)：返回库中多个 string 的 value</li> <li>setnx(key, value)：添加 string，名称为 key，值为 value</li> <li>setex(key, time, value)：向库中添加 string，设定过期时间 time</li> <li>mset(key N, value N)：批量设置多个 string 的值</li> <li>msetnx(key N, value N)：如果所有名称为 key i 的 string 都不存在</li> <li>incr(key)：名称为 key 的 string 增 1 操作</li> <li>incrby(key, integer)：名称为 key 的 string 增加 integer</li> <li>decr(key)：名称为 key 的 string 减 1 操作</li> <li>decrby(key, integer)：名称为 key 的 string 减少 integer</li> <li>append(key, value)：名称为 key 的 string 的值附加 value</li> <li>substr(key, start, end)：返回名称为 key 的 string 的 value 的子串</li></ul> <h3 id="对-list-操作的命令"><a href="#对-list-操作的命令" class="header-anchor">#</a> 对 List 操作的命令</h3> <ul><li>rpush(key, value)：在名称为 key 的 list 尾添加一个值为 value 的元素</li> <li>lpush(key, value)：在名称为 key 的 list 头添加一个值为 value 的元素</li> <li>llen(key)：返回名称为 key 的 list 的长度</li> <li>lrange(key, start, end)：返回名称为 key 的 list 中 start 至 end 之间的元素</li> <li>ltrim(key, start, end)：截取名称为 key 的 list</li> <li>lindex(key, index)：返回名称为 key 的 list 中 index 位置的元素</li> <li>lset(key, index, value)：给名称为 key 的 list 中 index 位置的元素赋值</li> <li>lrem(key, count, value)：删除 count 个 key 的 list 中值为 value 的元素</li> <li>lpop(key)：返回并删除名称为 key 的 list 中的首元素</li> <li>rpop(key)：返回并删除名称为 key 的 list 中的尾元素</li> <li>blpop(key1, key2,… key N, timeout)：lpop 命令的 block 版本。</li> <li>brpop(key1, key2,… key N, timeout)：rpop 的 block 版本。</li> <li>rpoplpush(srckey, dstkey)：返回并删除名称为 srckey 的 list 的尾元素，并将该元素添加到名称为 dstkey 的 list 的头部</li></ul> <h3 id="对-set-操作的命令"><a href="#对-set-操作的命令" class="header-anchor">#</a> 对 Set 操作的命令</h3> <ul><li>sadd(key, member)：向名称为 key 的 set 中添加元素 member</li> <li>srem(key, member) ：删除名称为 key 的 set 中的元素 member</li> <li>spop(key) ：随机返回并删除名称为 key 的 set 中一个元素</li> <li>smove(srckey, dstkey, member) ：移到集合元素</li> <li>scard(key) ：返回名称为 key 的 set 的基数</li> <li>sismember(key, member) ：member 是否是名称为 key 的 set 的元素</li> <li>sinter(key1, key2,…key N) ：求交集</li> <li>sinterstore(dstkey, (keys)) ：求交集并将交集保存到 dstkey 的集合</li> <li>sunion(key1, (keys)) ：求并集</li> <li>sunionstore(dstkey, (keys)) ：求并集并将并集保存到 dstkey 的集合</li> <li>sdiff(key1, (keys)) ：求差集</li> <li>sdiffstore(dstkey, (keys)) ：求差集并将差集保存到 dstkey 的集合</li> <li>smembers(key) ：返回名称为 key 的 set 的所有元素</li> <li>srandmember(key) ：随机返回名称为 key 的 set 的一个元素</li></ul> <h3 id="对-hash-操作的命令"><a href="#对-hash-操作的命令" class="header-anchor">#</a> 对 Hash 操作的命令</h3> <ul><li>hset(key, field, value)：向名称为 key 的 hash 中添加元素 field</li> <li>hget(key, field)：返回名称为 key 的 hash 中 field 对应的 value</li> <li>hmget(key, (fields))：返回名称为 key 的 hash 中 field i 对应的 value</li> <li>hmset(key, (fields))：向名称为 key 的 hash 中添加元素 field</li> <li>hincrby(key, field, integer)：将名称为 key 的 hash 中 field 的 value 增加 integer</li> <li>hexists(key, field)：名称为 key 的 hash 中是否存在键为 field 的域</li> <li>hdel(key, field)：删除名称为 key 的 hash 中键为 field 的域</li> <li>hlen(key)：返回名称为 key 的 hash 中元素个数</li> <li>hkeys(key)：返回名称为 key 的 hash 中所有键</li> <li>hvals(key)：返回名称为 key 的 hash 中所有键对应的 value</li> <li>hgetall(key)：返回名称为 key 的 hash 中所有的键（field）及其对应的 value</li></ul> <h3 id="redis-sentinel"><a href="#redis-sentinel" class="header-anchor">#</a> Redis Sentinel</h3> <ul><li>ping ：返回 pong</li> <li>sentinel masters ：列出所有被监视的主服务器，以及这些主服务器的当前状态。</li> <li>sentinel slaves：列出给定主服务器的所有从服务器，以及这些从服务器的当前状态。</li> <li>sentinel get-master-addr-by-name：返回给定名字的主服务器的 IP 地址和端口号。如果这个主服务器正在执行故障转移操作，或者针对这个主服务器的故障转移操作已经完成，那么这个命令返回新的主服务器的 IP 地址和端口号。</li> <li>sentinel reset：重置所有名字和给定模式 pattern 相匹配的主服务器。pattern 参数是一个 Glob 风格的模式 重置操作清楚主服务器目前的所有状态，包括正在执行中的故障转移，并移除目前已经发现和关联的，主服务器的所有从服务器和 Sentinel 。</li> <li>sentinel failover：当主服务器失效时，在不询问其他 Sentinel 意见的情况下，强制开始一次自动故障迁移（不过发起故障转移的 Sentinel 会向其他 Sentinel 发送一个新的配置，其他 Sentinel 会根据这个配置进行相应的更新）。</li></ul></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/Memorydoc/edit/master/docs/03.技术架构/110.微服务/20.Redis.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/03/08, 00:59:33</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/60f188/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">双亲委派模型</div></a> <a href="/pages/a0f472/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">分布式锁</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/60f188/" class="prev">双亲委派模型</a></span> <span class="next"><a href="/pages/a0f472/">分布式锁</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/964fc2fdsa56/"><div>
            命令模式
            <span class="title-tag">
              原创
            </span></div></a> <span class="date">05-03</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/964fc2fdsa3/"><div>
            桥接模式
            <span class="title-tag">
              原创
            </span></div></a> <span class="date">05-02</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/7a6d3a21/"><div>
            优雅写代码三
            <span class="title-tag">
              原创
            </span></div></a> <span class="date">04-29</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:17615195790@163.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/Memorydoc" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/Memorydoc/memorydoc-vuepress-blog" target="_blank" title="本站主题">Memorydoc</a> 
    | Copyright © 2021-2022
    <span>Memorydoc | <a href="https://github.com/Memorydoc/memorydoc-vuepress-blog/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.25d5bd39.js" defer></script><script src="/assets/js/2.da1b78fa.js" defer></script><script src="/assets/js/3.c45fb83a.js" defer></script><script src="/assets/js/88.35d4530d.js" defer></script>
  </body>
</html>
